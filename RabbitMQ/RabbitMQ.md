# Rabbit MQ

* [Kafka va MQ](#kafka-va-mq)

### Kafka va MQ

| Rabbit MQ                                                                                                                                                                                                                    | Kafka                                                                                                                                                                                                                                                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| RabbitMQ is a **message broker** initially designed as a message queue or point-to-point communication model.                                                                                                                    | Apache Kafka is a **distributed event streaming platform** that can ingest events from different source systems at scale and store them in a fault-tolerant distributed system called a Kafka cluster.                                                                                                          |
| A **Command** represents a request to be processed. A Command has a sender and one receiver. The receiver must process the command and acknowledge the sender about the outcome, allowing the sender to expect a sense of guarantee. | An **Event** represents a state change of an application. It is expressed in the past tense; it carries necessary information to notify receivers about the state transition (event carried state transfer). Unlike a Command, Events don’t expect a response in return and can be processed by many receivers. |
| ![command](./Command.jpeg)                                                                                                                                                                                                   | ![event](./Event.jpeg)                                                                                                                                                                                                                                                                                      |
| Messages are transient by default and **deleted from the broker after they are consumed** and acknowledged by consumers. | Messages written to Kafka are durable by default; they are **not deleted after consumption**. Kafka stores messages for a set amount of time and purges messages older than the retention period.  |
| New messages are **pushed** or sent to consumers from the broker in the push model |  Kafka supports only **pull-based** message consumption  |
| Message brokers like ActiveMQ and RabbitMQ offer hierarchical topics, giving consumers more subscription points and flexibility. A hierarchical topic is a structure representing a hierarchy such as /travel/flights/airline/flight-number/seat. Consumers can **subscribe to different hierarchy levels** with different values to select the events at a finer granularity. | Kafka **doesn’t offer that level of granular subscriptions to topics**. A consumer reading from a topic must do the filtering at the consumer level. |
| ActiveMQ offers **total ordering destinations** to preserve message ordering across all consumers for a given topic. Nevertheless, that results in a performance cost since greater synchronization is required. | Kafka has a different take on total message ordering. Kafka ensures that messages with the same partition key will always end up in the same partition regardless of the producer. Messages are written in a partition based on their arrival order, guaranteeing a **strict ordering for messages with the same partition key**.|

